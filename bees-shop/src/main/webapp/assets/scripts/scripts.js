var beesden=function(a){return{ajax:function(a,b,c,d,e){var f=new XMLHttpRequest;e=e?e:"GET",a=a.replace(/[?&]ajax=([^&]*)/,""),a=a+(a.indexOf("?")>-1?"&":"?")+"ajax=true",f.onreadystatechange=function(){4===f.readyState&&(200===f.status?b&&"function"==typeof b&&b(f):c&&"function"==typeof c&&c(f))},f.open(e,a,!0),f.setRequestHeader("Cache-Control","no-cache"),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(d)},async:function(b,c){if(a.getElementById(c))return!1;var d=a.createElement("script");d.type="text/javascript",d.async=!0,d.id=c,d.src=b,a.body.appendChild(d)},serialize:function(a){var b=[];for(i=0;i<a.elements.length;i++)j=a.elements[i],"INPUT"==j.nodeName||"BUTTON"==j.nodeName?"radio"==j.type||"checkbox"==j.type?a.elements[i].checked&&b.push(a.elements[i].name+"="+encodeURIComponent(a.elements[i].value)):"submit"!=j.type&&b.push(a.elements[i].name+"="+encodeURIComponent(a.elements[i].value)):"SELECT"==j.nodeName?b.push(a.elements[i].name+"="+encodeURIComponent(a.elements[i].value)):"TEXTAREA"==j.nodeName&&b.push(a.elements[i].name+"="+encodeURIComponent(a.elements[i].value));return b.join("&")}}}(document);beesden.content=function(a){return pagination=function(){function b(a){var b=0;if(a.offsetParent){do b+=a.offsetTop;while(a=a.offsetParent);return b}}function c(b,d,e){if(!(a.body.scrollTop<=d)){var f=d/e*50;a.body.scrollTop=a.body.scrollTop-f,setTimeout(function(){c(b,d,e)},5)}}function d(){j=!0,l.className+=" reveal",c(l,b(contentOverlay)-50,700),beesden.ajax(location.href,function(b){a.getElementById("pagination").innerHTML=b.responseText,pagination()},function(){console.log(l),l.className=l.className.replace(" reveal","")})}var e,f,g,h=(a.getElementById("category"),a.querySelectorAll(".resultsContainer")),j="state"in window.history&&null!==window.history.state,k=location.href,l=a.getElementById("contentOverlay");if(h.length){for(l||(l=l||a.createElement("div"),l.id="contentOverlay",h[0].parentNode.appendChild(l)),i=0;i<h.length;i++){e=h[i].getElementsByTagName("a");for(var m=0;m<e.length;m++)e[m].onclick=function(){return window.history.pushState(null,null,this.href),d(g),!1};f=h[i].getElementsByTagName("select");for(var m=0;m<f.length;m++)f[m].onchange=function(){g=this.form.action+beesden.serialize(this.form),window.history.pushState(null,document.title,g),d(g)}}window.onpopstate=function(){(location.href!=k||j)&&d(g)}}},{init:function(){pagination()}}}(document),beesden.forms=function(a){var b=function(){function b(b){Array.prototype.forEach.call(a.querySelectorAll("#checkoutFlow fieldset"),function(a){a.style.display=a.className.indexOf(b.value)<0?"none":"block"})}var c,d;Array.prototype.forEach.call(a.getElementsByClassName("formSelect"),function(e,f){d=e.querySelector("input"),d&&(d.addEventListener("change",function(){b(this)}),1>f&&(c=a.createElement("div"),e.parentNode.insertBefore(c,e.nextSibling),d.checked=!0,b(d)),c.appendChild(e))})},c=function(){Array.prototype.forEach.call(a.getElementsByTagName("input"),function(a){"hidden"!=a.type&&"checkbox"!=a.type&&"radio"!=a.type&&a.addEventListener("blur",function(){this.value=this.value.trim()})})};return{init:function(){b(),c()}}}(document),beesden.layout=function(a){return menu=function(){for(menuToggle=a.querySelectorAll("label.menuToggle"),overlay=a.createElement("div"),overlay.id="menuOverlay",a.body.appendChild(overlay),i=0;i<menuToggle.length;i++)menuToggle[i].onclick=function(){return a.body.className.indexOf("showMenu")<0?a.body.className+=" showMenu":a.body.className=a.body.className.replace(" showMenu",""),!1};overlay.onclick=function(){a.body.className=a.body.className.replace(" showMenu","")}},{init:function(){menu()}}}(document),beesden.plugins=function(a){var b=function(b,c,d,e){function f(c){c>0?(c=h[0].offsetWidth*c>b.offsetWidth?Math.round(b.offsetWidth/h[0].offsetWidth):c,g(c),b.style.left=-c*h[0].offsetWidth+"px",k="0"):(c=h[0].offsetWidth*c<b.offsetWidth?-Math.round(b.offsetWidth/h[0].offsetWidth):c,g()),console.log(),j=!("transition"in a.body.style),k=b.offsetLeft<0?0:c*h[0].offsetWidth+"px",b.style.transition="left "+d+"s ease-in-out",b.style.left=k,j&&g(b.offsetLeft<0?-Math.round(b.offsetWidth/h[0].offsetWidth):0)}function g(a){for(i=0;(0>a?-a:a)>i;i++)a>0?b.insertBefore(b.lastChild,b.firstChild):0>a&&b.insertBefore(b.firstChild,b.lastChild.nextSibling);b.style.transition="none",b.style.left=0,j=!0}var h,j,k,b=b||a.querySelector(".promotion ul"),c=c||6,d=d||.6,l=a.createElement("span"),m=a.createElement("span");if(b&&b.childNodes){h=b.childNodes,b.addEventListener("transitionend",function(){g(b.offsetLeft<0?-Math.round(b.offsetWidth/h[0].offsetWidth):0)},!1),l.className="scroll button advance left",m.className="scroll button advance right",l.innerHTML="&laquo;",m.innerHTML="&raquo;",b.parentNode.insertBefore(l,b),b.parentNode.insertBefore(m,b.nextSibling),g();var n=b.innerHTML;for(i=h.length;2*e>i;i++)b.innerHTML+=n;l.onclick=function(){j&&f(c)},m.onclick=function(){j&&f(-c)}}},c=function(b,c,d){function e(b,d){o&&p!=b&&(q=b,curSlide=a.getElementById(n+p),nextSlide=a.getElementById(n+q),clearTimeout(l),1==d?f():l=setTimeout(f,c))}function f(){o=!1,h(q),curSlide.style.opacity=0,nextSlide.style.opacity=1}function g(a){e(Number(a.id.substr(a.id.lastIndexOf("-")+1)),!0)}function h(b){for(i=0;i<j.length;i++)m.childNodes[i].className="";a.getElementById(n+"control-"+b).className="selected"}var j,k,l,b=b||a.getElementsByClassName("slides")[0],m=a.createElement("ol"),n="bees-slider-",o=!0,p=1,q=1;if(!(null==b||b.childNodes.length<2)){for(j=b.childNodes,b.parentNode.appendChild(m),m.className="slide_nav",i=0;i<b.childNodes.length;i++)k=a.createElement("li"),k.id=n+"control-"+(i+1),k.onclick=function(){g(this)},m.appendChild(k),1>i&&(j[i].style.opacity=1),j[i].id=n+(i+1),j[i].style.transition="opacity "+d+"s",j[i].addEventListener("transitionend",function(){1==this.style.opacity&&(p=q,o=!0,e(q==j.length?1:p+1))},!1);h(p),e(q)}};return{init:function(){b(),c()},carousel:b,slider:c}}(document),beesden.product=function(a){var b=function(b){var c,d=b.querySelector("#productForm"),e=a.createElement("a"),f="product_confirm";d&&(e.className=f,e.href="/checkout/basket",d.appendChild(e),d.onsubmit=function(){c=d.querySelectorAll("button");for(var a=0;a<c.length;a++)c[a].disabled=!0;return beesden.ajax(d.action,function(a){a=JSON.parse(a.response),e.innerHTML=a.message,e.className=f+" update alert alert"+a.status,beesden.store.minibasket();for(var b=0;b<c.length;b++)c[b].disabled=!1},null,beesden.serialize(d),"POST"),!1})},c=function(a){var b=a.querySelector("#productImages .large"),d=a.querySelector("#productImages .small");for(i=0;i<d.childNodes.length;i++)d.childNodes[i].onclick=function(){return this.firstChild.src=this.firstChild.src.replace("/small/","/medium/"),b.appendChild(this),d.appendChild(b.firstChild),c(a),e(a),!1}},d=function(){var b=a.getElementById("socialShare");b&&(window.___gcfg={lang:"en-GB"},beesden.async("//connect.facebook.net/en_GB/all.js#xfbml=1","social-fb"),beesden.async("//platform.twitter.com/widgets.js","social-tw"),beesden.async("//apis.google.com/js/plusone.js","social-gp"),beesden.async("//assets.pinterest.com/js/pinit.js","social-pi"),b.style.display="block")},e=function(b){var c,d,e=b.querySelector("#productImages .large > a"),f=a.createElement("img");(e||!e.querySelector(".zoomImage"))&&(f.className="zoomImage",f.src=e.href,f.onload=function(){function a(a){c=-(f.offsetHeight-e.offsetHeight)/e.offsetHeight,d=-(f.offsetWidth-e.offsetWidth)/e.offsetWidth,f.style.left=(a.clientX-e.getBoundingClientRect().left)*d+"px",f.style.top=(a.clientY-e.getBoundingClientRect().top)*c+"px"}e.appendChild(f),e.onmouseover=function(){"large"==e.parentNode.className&&(f.style.opacity=1)},e.onmouseout=function(){f.style.opacity=0},e.onmousemove=function(b){"large"==e.parentNode.className&&a(b)},e.ontouchmove=function(b){"large"==e.parentNode.className&&a(b)}},e.onclick=function(){return f.style.opacity=1==f.style.opacity?0:1,!1})};return{init:function(a){b(a,2500),c(a),d(),e(a)}}}(document),beesden.store=function(a){var b=function(b){var d=a.getElementById("basketLink"),e=a.getElementById("basket");beesden.ajax("/checkout/basket?minibasket=true",function(a){d.innerHTML=a.responseText,c(d)}),b&&e&&beesden.ajax("/checkout/basket",function(a){e.outerHTML=a.response,c()})},c=function(c){var d,e;if(c=c||a.getElementById("basket"),c&&(d=c.querySelectorAll(".increase, .decrease, .remove")))for(i=0;i<d.length;i++)e=d[i],e.onclick=function(){return beesden.ajax(this.href,function(){b(!0)}),!1}};return{init:function(){c(),c(a.getElementById("basketLink"))},minibasket:b}}(document),window.onload=function(){beesden.layout&&beesden.layout.init(),beesden.content&&beesden.content.init();var a=document.getElementById("product");beesden.product&&a&&beesden.product.init(a),beesden.store&&beesden.store.init(),beesden.forms&&beesden.forms.init(),beesden.plugins&&beesden.plugins.init(),document.body.className+=" js"};